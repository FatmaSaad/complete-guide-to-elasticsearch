1

00:00:02,640  -->  00:00:08,120
I still have the search results from the previous lecture 
opened up, because I want to point something out.

2

00:00:09,080  -->  00:00:13,720
Perhaps you already noticed how the first
document doesn’t contain the “created_at” field.

3

00:00:14,640  -->  00:00:19,180
That’s because we indexed it before realizing
that we need the timestamps of when reviews

4

00:00:19,180  -->  00:00:20,180
were written.

5

00:00:21,020  -->  00:00:25,300
Remember how I said that fields may have zero
or more values by default?

6

00:00:26,100  -->  00:00:31,040
This means that all fields are actually optional
and you are free to leave them out completely

7

00:00:31,040  -->  00:00:32,600
when indexing documents.

8

00:00:33,100  -->  00:00:38,380
That’s different from relational databases
where you need to explicitly allow NULL values.

9

00:00:39,380  -->  00:00:42,960
But isn’t this inconvenient, you might wonder?

10

00:00:42,960  -->  00:00:45,800
Well, I suppose that’s a matter of preference.

11

00:00:46,160  -->  00:00:51,300
It does give you more flexibility out of the
box, but it also means that some integrity

12

00:00:51,300  -->  00:00:54,360
checks need to be done at the application
level.

13

00:00:54,940  -->  00:01:00,560
Elasticsearch will validate field values against
any mapping that might exist, but it won’t

14

00:01:00,560  -->  00:01:02,620
reject documents that leave fields out.

15

00:01:03,180  -->  00:01:09,020
To be clear, you can leave out fields even
if a mapping exists for it, so adding a field

16

00:01:09,020  -->  00:01:11,240
mapping does not make the field required.

17

00:01:12,400  -->  00:01:15,680
This means that you should handle this at
the application level.

18

00:01:16,420  -->  00:01:20,680
There are some workarounds for doing this
in Elasticsearch, but they are neither pretty

19

00:01:20,680  -->  00:01:22,040
nor convenient.

20

00:01:23,020  -->  00:01:28,520
When searching for documents, you just specify
field names as normal, and Elasticsearch will

21

00:01:28,520  -->  00:01:31,920
only consider documents that contain a value
for the field.

22

00:01:33,140  -->  00:01:38,640
In other words, you don’t need to actively handle
if some documents may have left fields out.

23

00:01:39,280  -->  00:01:43,440
That’s all I wanted to mention in this lecture,
so I’ll see you in the next one!
