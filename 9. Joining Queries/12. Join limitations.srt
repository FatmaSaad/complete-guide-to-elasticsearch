1

00:00:02,639  -->  00:00:06,779
Now that we have covered the functionality
of join queries, let’s take a step back

2

00:00:06,780  -->  00:00:09,000
and talk about a bit of theory.

3

00:00:09,000  -->  00:00:14,340
In particular, I want to mention a couple
of limitations that apply to join fields.

4

00:00:14,340  -->  00:00:18,230
There are just a few, so this is going to
be a short lecture.

5

00:00:18,230  -->  00:00:22,779
First of all, as I mentioned in a previous
lecture, the documents that we are joining

6

00:00:22,780  -->  00:00:25,660
must be stored within the same index.

7

00:00:25,660  -->  00:00:30,720
This means that we cannot have departments
stored in one index, and employees in another,

8

00:00:30,720  -->  00:00:33,600
and then try to join the two together.

9

00:00:33,600  -->  00:00:38,400
This is a performance limitation, as joins
would otherwise be really slow.

10

00:00:38,400  -->  00:00:44,760
Another limitation is that parent and child
documents must be indexed on the same shard.

11

00:00:44,769  -->  00:00:49,609
You already saw this in practice when we added
documents, because we had to explicitly provide

12

00:00:49,609  -->  00:00:54,680
a "routing" parameter to make sure that
the documents ended up on the same shard.

13

00:00:54,680  -->  00:00:58,480
On top of that, there can only be one join
field per index.

14

00:00:58,480  -->  00:01:02,680
That shouldn’t matter too much though, as
we can map as many document relationships

15

00:01:02,690  -->  00:01:09,310
as we want for that join field, and new relations
can always be added to an existing join field.

16

00:01:09,310  -->  00:01:15,940
You can also always add a new child to a relation,
but only if the relation is already a parent.

17

00:01:15,940  -->  00:01:19,500
Next, a document can only have one parent.

18

00:01:19,500  -->  00:01:24,200
This means that an employee can only belong
to one department, for instance.

19

00:01:24,200  -->  00:01:30,010
A document can, however, have multiple children,
so a department can have multiple employees,

20

00:01:30,010  -->  00:01:33,409
as you have already seen in the previous lectures.

21

00:01:33,409  -->  00:01:36,829
Those were the limitations that apply to "join"
fields.

22

00:01:36,829  -->  00:01:41,900
With that out of the way, let’s talk a bit
about the performance of joining queries.
