1
00:00:02,750 --> 00:00:09,350
燃料の特定の値のマッチングとは別に､ 値が範囲内にある場合の文書のマッチングも可能です｡

2
00:00:09,530 --> 00:00:14,480
テストデータで製品を扱っているので､ そろそろ追加注文したほうがいいだろうということで､

3
00:00:14,480 --> 00:00:18,530
在庫切れになりそうなドキュメントを探すのもいいかもしれませんね｡

4
00:00:18,920 --> 00:00:26,390
この例では､ 在庫欄の値が1～5の文書を､ 両方の値を含めてマッチングさせることにします｡

5
00:00:26,930 --> 00:00:35,090
クエリはrangeという名前で､ in stockフィールドを使用します｡ GTパラメータに1つ､

6
00:00:35,090 --> 00:00:39,170
LCパラメータに5つを指定します｡

7
00:00:39,440 --> 00:00:47,810
GTとLCのXとは別に､ GTとLCのキーは､ それぞれより大きい､ より小さいを表すショートカットキーとして使うこともできます｡

8
00:00:48,170 --> 00:00:54,860
つまり､ GTとLCのXは､ それぞれ以上と未満を意味します｡ 

9
00:00:55,010 --> 00:00:56,630
では､ クエリを実行してみましょう｡ 

10
00:00:57,590 --> 00:01:02,000
そして､ ご覧の通り､ 設置されたフィールドは1～5の間で試合をしています｡ 

11
00:01:02,420 --> 00:01:09,440
これらのキーを使って範囲を定義することができるが､ 範囲の下限と上限の境界を必ずしも指定する必要はない｡

12
00:01:09,680 --> 00:01:14,420
例えば､ 最大値を指定せずに､ 在庫数が5個以上の商品を全て検索することは､

13
00:01:14,420 --> 00:01:19,430
全く問題ないだろう｡ e. を上限とする｡ 

14
00:01:19,670 --> 00:01:27,380
ですから､ 必ずしも下限と上限の両方の範囲を定義する必要はなく､ 4つのキーを自由に使うことができます｡

15
00:01:27,860 --> 00:01:31,820
数値以外にも､ データフィールドでレンジクエリを使用することができます｡ 

16
00:01:31,820 --> 00:01:36,350
そこで､ 2010年に追加された製品にマッチするクエリを書いてみましょう｡ 

17
00:01:36,950 --> 00:01:43,670
既存のクエリをコピーしてここに貼り付け､ フィールドを変更して作成し､

18
00:01:43,670 --> 00:01:49,010
これら2つのキーの日付を入力します｡

19
00:01:50,330 --> 00:02:04,190
そこで､ 2010年スラッシュゼロ1を入力し､ スラッシュゼロ1は2010年1月1日､ 2010年スラッシュ12スラッシュ31が年末を意味することにする｡

20
00:02:04,430 --> 00:02:06,080
そして実行しよう｡ 

21
00:02:06,750 --> 00:02:13,080
そこで結果をスクロールしてみると､ 収録されている10文書は､ 確かに2010年に追加されたものであることがわかる｡

22
00:02:14,700 --> 00:02:20,340
私が指定した日付形式は､ Elasticsearchがインデックスにドキュメントを追加する際に使用するデフォルトのものです｡ 

23
00:02:20,340 --> 00:02:27,450
しかし､ クエリにフォーマットキーを追加することで､ クエリ内で定義した日付に別のフォーマットを指定することも可能です｡

24
00:02:27,750 --> 00:02:31,980
これは､ クエリ内で別の書式で日付を指定する必要がある場合に便利です｡ 

25
00:02:31,980 --> 00:02:33,510
だから､ それをやってみよう｡ 

26
00:02:33,690 --> 00:02:44,460
そこで､ ここにformatsという新しいパラメータを追加し､ これを取り除いて一日だけ入力することにします｡ 

27
00:02:45,060 --> 00:02:46,440
ダッシュ Mm.

28
00:02:46,470 --> 00:02:47,220
今月は

29
00:02:47,220 --> 00:02:54,990
大文字のM､ そしてダッシュとフリーのYが､ クエリを実行する前の年を表していることに注目してください｡

30
00:02:54,990 --> 00:03:01,320
GTI､ LC､ LC､ GTIに指定する日付は､ こちらが指定する日付形式を満たす必要があるので､

31
00:03:01,350 --> 00:03:05,610
供給する日付を調整すればよいのです｡

32
00:03:06,000 --> 00:03:11,220
だから､ ちょっと移動して､ スラッシュをハイフンに置き換えるしかないですね｡ 

33
00:03:11,670 --> 00:03:16,590
では､ 仮に2010年01月としましょう｡ 

34
00:03:18,500 --> 00:03:19,340
そうそう｡ 

35
00:03:19,640 --> 00:03:22,580
そして､ 他の日程も同じようにしてください｡ 

36
00:03:22,760 --> 00:03:28,970
つまり､ 31が今日､ 12が月､ 2010が年ということです｡ 

37
00:03:30,170 --> 00:03:37,100
なぜなら､ Elasticsearchは私たちが指定した新しい日付フォーマットを正しく処理し､

38
00:03:37,100 --> 00:03:46,130
そのフォーマットを使ってドキュメントをマッチングしてくれるからです｡
