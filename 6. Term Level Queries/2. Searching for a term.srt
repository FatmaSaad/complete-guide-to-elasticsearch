1
00:00:02,430 --> 00:00:07,740
まず､ is activeフィールドの値がtrueであるすべての文書を検索することで､ ソフト的にスタートさせることにします｡ 

2
00:00:07,770 --> 00:00:13,010
これは､ 以前の講義ですでに見たことのある用語クエリ句で行うことができます｡ 

3
00:00:13,020 --> 00:00:25,620
そこで､ productsとdefaultsを取得し､ search APIを使用してリクエストボディを追加し､ queryという用語を追加するオブジェクトとしてquery

4
00:00:25,620 --> 00:00:29,370
keyを追加します｡

5
00:00:29,940 --> 00:00:37,620
このオブジェクトの中で､ 同じクエリを設定できます｡ まず､ 検索したいフィールドはこのアクティブフィールドで､

6
00:00:37,620 --> 00:00:44,730
この構文を短縮して､ オブジェクトの代わりに値を直接指定することができます｡

7
00:00:45,000 --> 00:00:52,030
用語クエリを追加で設定する必要がある場合は､ いずれにせよオブジェクトを値として指定する必要があります｡

8
00:00:52,050 --> 00:00:53,460
あとは入力するだけです｡ 

9
00:00:53,460 --> 00:00:53,820
本当です｡ 

10
00:00:53,820 --> 00:00:54,510
ここです｡ 

11
00:00:57,050 --> 00:01:04,640
このクエリは487文書にマッチします｡ これは､ クエリDSLを使ったクエリのほぼ半分で､ 先ほど述べたような､ フィールドキーの値がオブジェクトである､

12
00:01:04,640 --> 00:01:09,230
より冗長な構造もサポートします｡

13
00:01:09,410 --> 00:01:15,350
そして､ このオブジェクトの中に様々なオプションを追加して､ よりコントロールしやすくし､ 検索する値のキーとすることができます｡

14
00:01:15,680 --> 00:01:17,870
これらのオプションのいくつかは､ 後で見ることができます｡ 

15
00:01:18,080 --> 00:01:21,440
でも､ とにかく､ もうひとつのバージョンも見せたいんです｡ 

16
00:01:21,470 --> 00:01:25,130
以前にも簡単にご覧いただきましたが､ もう一度補足しておきましょう｡ 

17
00:01:25,400 --> 00:01:31,280
そこでvalueと､ このキーの値として検索する値｡ 

18
00:01:32,160 --> 00:01:33,110
そして実行しよう｡ 

19
00:01:33,120 --> 00:01:35,130
そして､ ご覧の通り､ 同じものです｡ 

20
00:01:35,340 --> 00:01:41,320
このクエリは､ 最初に見たものと全く同じことをしますが､ これらのアクティブなオブジェクトにオプションを追加することができます｡

21
00:01:41,340 --> 00:01:43,260
さっきも言ったけど､ 詳しくは後ほど｡ 

22
00:01:43,680 --> 00:01:47,470
もちろん､ テキストフィールド内を検索することも可能です｡ 

23
00:01:47,490 --> 00:01:53,760
通常は､ active､ pauseed､ disabledのいずれかを含むstatusフィールドのようなenumに対してこれを行うでしょう｡ 

24
00:01:53,760 --> 00:01:59,550
例えば､ キーワードタイプのフィールドをクエリする場合､ タームレベルのクエリは分析されないので､

25
00:01:59,910 --> 00:02:02,730
これらのフィールドは分析されません｡

26
00:02:02,730 --> 00:02:06,300
完全に一致するものを検索すると､ 予測可能な結果が得られるでしょう｡ 

27
00:02:06,660 --> 00:02:12,690
いくつかのレベルクエリを使って全文フィールドも検索できますが､ そのようなフィールドは分析され､ クエリはそうではないので､

28
00:02:12,690 --> 00:02:15,780
ほとんど良いアイデアではありません｡

29
00:02:15,780 --> 00:02:18,420
その場合は､ 自分が何をやっているのか確認することです｡ 

30
00:02:18,900 --> 00:02:20,520
そして､ それがタームクエリです｡ 

31
00:02:20,610 --> 00:02:23,490
繰り返しになりますが､ このクエリは完全一致で使用する必要があります｡ 

32
00:02:23,490 --> 00:02:27,270
そのため､ 通常は番号､ フィールドの状態､ キーワードのフィールドを検索するために使用します｡ 
